{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#go-blueprint-ultimate-golang-blueprint-library","title":"Go Blueprint - Ultimate Golang Blueprint Library","text":"<p>Powerful CLI tool designed to streamline the process of creating Go projects with a robust and standardized structure. Not only does Go Blueprint facilitate project initialization, but it also offers seamless integration with popular Go frameworks, allowing you to focus on your application's code from the very beginning.</p>"},{"location":"#why-choose-go-blueprint","title":"Why Choose Go Blueprint?","text":"<ul> <li> <p>Easy Setup and Installation: Go Blueprint simplifies the setup process, making it a breeze to install and get started with your Go projects.</p> </li> <li> <p>Pre-established Go Project Structure: Save time and effort by having the entire Go project structure set up automatically. No need to worry about directory layouts or configuration files.</p> </li> <li> <p>HTTP Server Configuration Made Easy: Whether you prefer Go's standard library HTTP package, Chi, Gin, Fiber, HttpRouter, Gorilla/mux or Echo, Go Blueprint caters to your server setup needs.</p> </li> <li> <p>Focus on Your Application Code: With Go Blueprint handling the project scaffolding, you can dedicate more time and energy to developing your application logic.</p> </li> </ul>"},{"location":"#project-structure","title":"Project Structure","text":"<p>Here's an overview of the project structure created by Go Blueprint when all options are utilized:</p> <pre><code>/ (Root)\n\u251c\u2500\u2500 .github/\n\u2502   \u2514\u2500\u2500 workflows/\n\u2502       \u251c\u2500\u2500 go-test.yml           # GitHub Actions workflow for running tests.\n\u2502       \u2514\u2500\u2500 release.yml           # GitHub Actions workflow for releasing the application.\n\u251c\u2500\u2500 cmd/\n\u2502   \u251c\u2500\u2500 api/\n\u2502   \u2502   \u2514\u2500\u2500 main.go               # Main file for starting the server.\n\u2502   \u2514\u2500\u2500 web/\n\u2502       \u251c\u2500\u2500 styles/               # Only for generating css will not be served public.\n\u2502       \u2502   \u2514\u2500\u2500 input.css         # Tailwind input file for compiling output.css with CLI when HTMX is used.\n\u2502       \u251c\u2500\u2500 assets/\n\u2502       \u2502   \u251c\u2500\u2500 css/\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 output.css    # Generated CSS file.\n\u2502       \u2502   \u2514\u2500\u2500 js/\n\u2502       \u2502       \u2514\u2500\u2500 htmx.min.js   # HTMX library for dynamic HTML content.\n\u2502       \u251c\u2500\u2500 base.templ            # Base HTML template file.\n\u2502       \u251c\u2500\u2500 base_templ.go         # Generated Go code for base template.\n\u2502       \u251c\u2500\u2500 efs.go                # Includes assets into compiled binary.\n\u2502       \u251c\u2500\u2500 hello.go              # Logic for handling \"hello\" form.\n\u2502       \u251c\u2500\u2500 hello.templ           # Template file for the \"hello\" endpoint.\n\u2502       \u2514\u2500\u2500 hello_templ.go        # Generated Go code for the \"hello\" template.\n\u251c\u2500\u2500 frontend/                     # React advanced flag. Excludes HTMX.\n\u2502   \u251c\u2500\u2500 node_modules/             # Node dependencies.\n\u2502   \u251c\u2500\u2500 public/\n\u2502   \u2502   \u251c\u2500\u2500 index.html\n\u2502   \u2502   \u2514\u2500\u2500 favicon.ico\n\u2502   \u251c\u2500\u2500 src/                      # React source files.\n\u2502   \u2502   \u251c\u2500\u2500 App.tsx               # Main React component.\n\u2502   \u2502   \u251c\u2500\u2500 assets/               # React assets directory.\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 logo.svg\n\u2502   \u2502   \u251c\u2500\u2500 components/           # React components directory.\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 Header.tsx\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 Footer.tsx\n\u2502   \u2502   \u251c\u2500\u2500 styles/               # CSS/SCSS styles directory.\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 global.css\n\u2502   \u2502   \u2514\u2500\u2500 index.tsx             # Main entry point for React\n\u2502   \u251c\u2500\u2500 eslint.config.js          # ESLint configuration file.\n\u2502   \u251c\u2500\u2500 index.html                # Base HTML template.\n\u2502   \u251c\u2500\u2500 package.json              # Node.js package configuration.\n\u2502   \u251c\u2500\u2500 package-lock.json         # Lock file for Node.js dependencies.\n\u2502   \u251c\u2500\u2500 README.md                 # README file for the React project.\n\u2502   \u251c\u2500\u2500 tsconfig.app.json         # TypeScript configuration for the app.\n\u2502   \u251c\u2500\u2500 tsconfig.json             # Root TypeScript configuration.\n\u2502   \u251c\u2500\u2500 tsconfig.node.json        # TypeScript configuration for Node.js.\n\u2502   \u2514\u2500\u2500 vite.config.ts            # Vite configuration file.\n\u251c\u2500\u2500 internal/\n\u2502   \u251c\u2500\u2500 database/\n\u2502   \u2502   \u251c\u2500\u2500 database_test.go      # File containing integration tests for the database operations.\n\u2502   \u2502   \u2514\u2500\u2500 database.go           # File containing functions related to database operations.\n\u2502   \u2514\u2500\u2500 server/\n\u2502       \u251c\u2500\u2500 routes.go             # File defining HTTP routes.\n\u2502       \u251c\u2500\u2500 routes_test.go        # Test file for testing HTTP handlers.\n\u2502       \u2514\u2500\u2500 server.go             # Main server logic.\n\u251c\u2500\u2500 .air.toml                     # Configuration file for Air, a live-reload utility.\n\u251c\u2500\u2500 docker-compose.yml            # Docker Compose configuration.\n\u251c\u2500\u2500 Dockerfile                    # Dockerfile configuration for the Go project.\n\u251c\u2500\u2500 .env                          # Environment configuration file.\n\u251c\u2500\u2500 .gitignore                    # File specifying which files and directories to ignore in Git.\n\u251c\u2500\u2500 go.mod                        # Go module file for managing dependencies.\n\u251c\u2500\u2500 .goreleaser.yml               # Configuration file for GoReleaser, a tool for building and releasing binaries.\n\u251c\u2500\u2500 go.sum                        # Go module file containing checksums for dependencies.\n\u251c\u2500\u2500 Makefile                      # Makefile for defining and running commands.\n\u2514\u2500\u2500 README.md                     # Project's README file containing essential information about the project.\n\n</code></pre> <p>This structure provides a comprehensive organization of your project, separating source code, tests, configurations and documentation.</p>"},{"location":"blueprint-ui/","title":"Blueprint UI","text":"<p>The Blueprint UI is a crucial component of the Go Blueprint ecosystem, providing a user-friendly interface for creating CLI commands and visualizing project structures.</p> <p>By visiting the Blueprint UI website at go-blueprint.dev, users can interact with a visual representation of their project setup before executing commands.</p> <p></p> <p>This enhances the overall experience of using Go Blueprint by providing a visual representation of project setups and simplifying the command generation process. Check Blueprint UI code.</p>"},{"location":"installation/","title":"Installation","text":"<p>Go-Blueprint provides a convenient CLI tool to effortlessly set up your Go projects. Follow the steps below to install the tool on your system.</p>"},{"location":"installation/#binary-installation","title":"Binary Installation","text":"<p>To install the Go-Blueprint CLI tool as a binary, run the following command:</p> <pre><code>go install github.com/melkeydev/go-blueprint@latest\n</code></pre> <p>This command installs the Go-Blueprint binary, automatically binding it to your <code>$GOPATH</code>.</p> <p>If you\u2019re using Zsh, you\u2019ll need to add it manually to <code>~/.zshrc</code>.</p> <p>After running the installation command, you need to update your <code>PATH</code> environment variable. To do this, you need to find out the correct <code>GOPATH</code> for your system. You can do this by running the following command: Check your <code>GOPATH</code></p> <p><code>go env GOPATH</code></p> <p>Then, add the following line to your <code>~/.zshrc</code> file:</p> <p><code>GOPATH=$HOME/go  PATH=$PATH:/usr/local/go/bin:$GOPATH/bin</code></p> <p>Save the changes to your <code>~/.zshrc</code> file by running the following command:</p> <p><code>source ~/.zshrc</code></p>"},{"location":"installation/#npm-install","title":"NPM Install","text":"<p>If you prefer using Node.js package manager, you can install Go-Blueprint via NPM. This method is convenient for developers who are already working in JavaScript/Node.js environments and want to integrate Go-Blueprint into their existing workflow.</p> <pre><code>npm install -g @melkeydev/go-blueprint\n</code></pre> <p>The <code>-g</code> flag installs Go-Blueprint globally, making it accessible from any directory on your system.</p>"},{"location":"installation/#homebrew-install","title":"Homebrew Install","text":"<p>For macOS and Linux users, Homebrew provides a simple way to install Go-Blueprint. Homebrew automatically handles dependencies and keeps the tool updated through its package management system.</p> <pre><code>brew install go-blueprint\n</code></pre> <p>After installation via Homebrew, Go-Blueprint will be automatically added to your PATH, making it immediately available in your terminal.</p>"},{"location":"installation/#building-and-installing-from-source","title":"Building and Installing from Source","text":"<p>If you prefer to build and install Go-Blueprint directly from the source code, you can follow these steps:</p> <p>Clone the Go-Blueprint repository from GitHub:</p> <pre><code>git clone https://github.com/melkeydev/go-blueprint\n</code></pre> <p>Build the Go-Blueprint binary:</p> <pre><code>go build\n</code></pre> <p>Install in your <code>$PATH</code> to make it accessible system-wide:</p> <pre><code>go install\n</code></pre> <p>Verify the installation by running:</p> <pre><code>go-blueprint version\n</code></pre> <p>This should display the version information of the installed Go-Blueprint.</p> <p>Now you have successfully built and installed Go-Blueprint from the source code.</p>"},{"location":"advanced-flag/advanced-flag/","title":"Advanced Flag in Blueprint","text":"<p>The <code>--advanced</code> flag in Blueprint serves as a switch to enable additional features during project creation. It is applied with the <code>create</code> command and unlocks the following features:</p> <ul> <li> <p>HTMX Support using Templ: Enables the integration of HTMX support for dynamic web pages using Templ.</p> </li> <li> <p>CI/CD Workflow Setup using GitHub Actions: Automates the setup of a CI/CD workflow using GitHub Actions.</p> </li> <li> <p>Websocket Support: WebSocket endpoint that sends continuous data streams through the WS protocol.</p> </li> <li> <p>Tailwind: Adds Tailwind CSS support to the project.</p> </li> <li> <p>Docker: Docker configuration for go project.</p> </li> <li> <p>React: Frontend written in TypeScript, including an example fetch request to the backend.</p> </li> </ul> <p>To utilize the <code>--advanced</code> flag, use the following command:</p> <pre><code>go-blueprint create --name &lt;project_name&gt; --framework &lt;selected_framework&gt; --driver &lt;selected_driver&gt; --advanced\n</code></pre> <p>By including the <code>--advanced</code> flag, users can choose one or all of the advanced features. The flag enhances the simplicity of Blueprint while offering flexibility for users who require additional functionality.</p> <p>To recreate the project using the same configuration semi-interactively, use the following command:</p> <pre><code>go-blueprint create --name my-project --framework chi --driver mysql --advanced\n</code></pre> <p>Non-Interactive Setup is also possible:</p> <pre><code>go-blueprint create --name my-project --framework chi --driver mysql --advanced --feature htmx --feature githubaction --feature websocket --feature tailwind\n</code></pre>"},{"location":"advanced-flag/docker/","title":"Docker","text":"<p>The Docker advanced flag provides the app's Dockerfile configuration and creates or updates the docker-compose.yml file, which is generated if a DB driver is used. The Dockerfile includes a two-stage build, and the final config depends on the use of advanced features. In the end, you will have a smaller image without unnecessary build dependencies.</p>"},{"location":"advanced-flag/docker/#dockerfile","title":"Dockerfile","text":"<pre><code>FROM golang:1.24.4-alpine AS build\n\nRUN apk add --no-cache curl libstdc++ libgcc\n\nWORKDIR /app\n\nCOPY go.mod go.sum ./\nRUN go mod download\n\nCOPY . .\n\nRUN go install github.com/a-h/templ/cmd/templ@latest &amp;&amp; \\\n    templ generate &amp;&amp; \\\n    curl -sL https://github.com/tailwindlabs/tailwindcss/releases/latest/download/tailwindcss-linux-x64-musl -o tailwindcss &amp;&amp; \\\n    chmod +x tailwindcss &amp;&amp; \\\n    ./tailwindcss -i cmd/web/styles/input.css -o cmd/web/assets/css/output.css\n\nRUN go build -o main cmd/api/main.go\n\nFROM alpine:3.20.1 AS prod\nWORKDIR /app\nCOPY --from=build /app/main /app/main\nEXPOSE ${PORT}\nCMD [\"./main\"]\n</code></pre> <p>Docker config if React flag is used:</p> <pre><code>FROM golang:1.24.4-alpine AS build\n\nWORKDIR /app\n\nCOPY go.mod go.sum ./\nRUN go mod download\n\nCOPY . .\n\nRUN go build -o main cmd/api/main.go\n\nFROM alpine:3.20.1 AS prod\nWORKDIR /app\nCOPY --from=build /app/main /app/main\nEXPOSE ${PORT}\nCMD [\"./main\"]\n\n\nFROM node:20 AS frontend_builder\nWORKDIR /frontend\n\nCOPY frontend/package*.json ./\nRUN npm install\nCOPY frontend/. .\nRUN npm run build\n\nFROM node:20-slim AS frontend\nRUN npm install -g serve\nCOPY --from=frontend_builder /frontend/dist /app/dist\nEXPOSE 5173\nCMD [\"serve\", \"-s\", \"/app/dist\", \"-l\", \"5173\"]\n</code></pre>"},{"location":"advanced-flag/docker/#docker-compose","title":"Docker compose","text":"<p>Docker and docker-compose.yml pull environment variables from the .env file.</p> <p>Example if the Docker flag is used with the MySQL DB driver:</p> <pre><code>services:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n      target: prod\n    restart: unless-stopped\n    ports:\n      - ${PORT}:${PORT}\n    environment:\n      APP_ENV: ${APP_ENV}\n      PORT: ${PORT}\n      BLUEPRINT_DB_HOST: ${BLUEPRINT_DB_HOST}\n      BLUEPRINT_DB_PORT: ${BLUEPRINT_DB_PORT}\n      BLUEPRINT_DB_DATABASE: ${BLUEPRINT_DB_DATABASE}\n      BLUEPRINT_DB_USERNAME: ${BLUEPRINT_DB_USERNAME}\n      BLUEPRINT_DB_PASSWORD: ${BLUEPRINT_DB_PASSWORD}\n    depends_on:\n      mysql_bp:\n        condition: service_healthy\n    networks:\n      - blueprint\n  mysql_bp:\n    image: mysql:latest\n    restart: unless-stopped\n    environment:\n      MYSQL_DATABASE: ${BLUEPRINT_DB_DATABASE}\n      MYSQL_USER: ${BLUEPRINT_DB_USERNAME}\n      MYSQL_PASSWORD: ${BLUEPRINT_DB_PASSWORD}\n      MYSQL_ROOT_PASSWORD: ${BLUEPRINT_DB_ROOT_PASSWORD}\n    ports:\n      - \"${BLUEPRINT_DB_PORT}:3306\"\n    volumes:\n      - mysql_volume_bp:/var/lib/mysql\n    healthcheck:\n      test: [\"CMD\", \"mysqladmin\", \"ping\", \"-h\", \"${BLUEPRINT_DB_HOST}\", \"-u\", \"${BLUEPRINT_DB_USERNAME}\", \"--password=${BLUEPRINT_DB_PASSWORD}\"]\n      interval: 5s\n      timeout: 5s\n      retries: 3\n      start_period: 15s\n    networks:\n      - blueprint\n\nvolumes:\n  mysql_volume_bp:\nnetworks:\n  blueprint:\n</code></pre>"},{"location":"advanced-flag/docker/#note","title":"Note","text":"<p>If you are testing more than one framework locally, be aware of Docker leftovers such as volumes. For proper cleaning and building, use <code>docker compose down --volumes</code> and <code>docker compose up --build</code>.</p> <p>or</p> <pre><code>docker compose build --no-cache &amp;&amp; docker compose up\n</code></pre>"},{"location":"advanced-flag/goreleaser/","title":"GoReleaser & GoTest CI","text":"<p>Release process for Go projects, providing extensive customization options through its configuration file, <code>.goreleaser.yml</code>. By default, it ensures dependency cleanliness, builds binaries for various platforms and architectures, facilitates pre-release creation, and organizes binary packaging into archives with naming schemes.</p> <p>For comprehensive insights into customization possibilities, refer to the GoReleaser documentation.</p>"},{"location":"advanced-flag/goreleaser/#usage-with-tags","title":"Usage with Tags","text":"<p>To initiate release builds with GoReleaser, you need to follow these steps:</p> <ul> <li>Tag Creation:   When your project is ready for a release, create a new tag in your Git repository. For example:</li> </ul> <pre><code>git tag v1.0.0\n</code></pre> <ul> <li>Tag Pushing:   Push the tag to the repository to trigger GoReleaser:</li> </ul> <pre><code>git push origin v1.0.0\n</code></pre> <p>Following these steps ensures proper tagging of your project, prompting GoReleaser to execute configured releases. This approach simplifies release management and automates artifact distribution.</p>"},{"location":"advanced-flag/goreleaser/#go-test-continuous-integration-for-go-projects","title":"Go Test - Continuous Integration for Go Projects","text":"<p>The <code>go-test.yml</code> file defines a GitHub Actions workflow for continuous integration (CI) of Go projects within a GitHub repository.</p>"},{"location":"advanced-flag/goreleaser/#workflow-steps","title":"Workflow Steps","text":"<p>The job outlined in this workflow includes the following steps:</p> <ol> <li> <p>Checkout:    Fetches the project's codebase from the repository.</p> </li> <li> <p>Go Setup:    Configures the Go environment with version 1.21.x.</p> </li> <li> <p>Build and Test:    Builds the project using <code>go build</code> and runs tests across all packages (<code>./...</code>) using <code>go test</code>. </p> </li> </ol> <p>This workflow serves to automate the testing process of a Go project within a GitHub repository, ensuring code quality and reliability with each commit and pull request.</p>"},{"location":"advanced-flag/htmx-templ/","title":"HTMX and Templ","text":"<p>The WEB directory contains the web-related components and assets for the project. It leverages htmx and templ in Go for dynamic web content generation.</p>"},{"location":"advanced-flag/htmx-templ/#structure","title":"Structure","text":"<pre><code>web/\n\u2502\n\u2502\n\u251c\u2500\u2500 assets/\n\u2502   \u2514\u2500\u2500 js/\n\u2502       \u2514\u2500\u2500 htmx.min.js     # htmx library for dynamic HTML content\n\u2502\n\u251c\u2500\u2500 base.templ              # Base template for HTML structure\n\u251c\u2500\u2500 base_templ.go           # Generated Go code for base template\n\u251c\u2500\u2500 efs.go                  # Embeds static files into the Go binary\n\u2502\n\u251c\u2500\u2500 hello.go                # Handler for the Hello Web functionality\n\u251c\u2500\u2500 hello.templ             # Template for rendering the Hello form and post data\n\u2514\u2500\u2500 hello_templ.go          # Generated Go code for hello template\n</code></pre>"},{"location":"advanced-flag/htmx-templ/#usage","title":"Usage","text":"<ul> <li>Navigate to Project Directory:</li> </ul> <pre><code>cd my-project\n</code></pre> <ul> <li>Install Templ CLI:</li> </ul> <pre><code>go install github.com/a-h/templ/cmd/templ@latest\n</code></pre> <ul> <li>Generate Templ Function Files:</li> </ul> <pre><code>templ generate\n</code></pre> <ul> <li>Start Server:</li> </ul> <pre><code>make run\n</code></pre>"},{"location":"advanced-flag/htmx-templ/#makefile","title":"Makefile","text":"<p>Automates templ with Makefile entries, which are automatically created if the htmx advanced flag is used. It detects if templ is installed or not and generates templates with the make build command. Both Windows and Unix-like OS are supported.</p> <pre><code>all: build\n\ntempl-install:\n    @if ! command -v templ &gt; /dev/null; then \\\n        read -p \"Go's 'templ' is not installed on your machine. Do you want to install it? [Y/n] \" choice; \\\n        if [ \"$$choice\" != \"n\" ] &amp;&amp; [ \"$$choice\" != \"N\" ]; then \\\n            go install github.com/a-h/templ/cmd/templ@latest; \\\n            if [ ! -x \"$$(command -v templ)\" ]; then \\\n                echo \"templ installation failed. Exiting...\"; \\\n                exit 1; \\\n            fi; \\\n        else \\\n            echo \"You chose not to install templ. Exiting...\"; \\\n            exit 1; \\\n        fi; \\\n    fi\n\nbuild: templ-install\n    @echo \"Building...\"\n    @templ generate\n    @go build -o main cmd/api/main.go\n</code></pre>"},{"location":"advanced-flag/htmx-templ/#templating","title":"Templating","text":"<p>Templates are generated using the <code>templ generate</code> command after project creation. These templates are then compiled into Go code for efficient execution.</p> <p>You can test HTMX functionality on <code>localhost:PORT/web</code> endpoint.</p>"},{"location":"advanced-flag/react-vite/","title":"React & Vite (TypeScript)","text":"<p>This template provides a minimal setup for getting React working with Vite for the frontend and go on the backend. It allows you to easily integrate React with Tailwind CSS and Vite for fast development.</p> <p>The React advanced flag can be combined with the Tailwind flag for enhanced styling capabilities.</p>"},{"location":"advanced-flag/react-vite/#project-structure","title":"Project Structure","text":"<pre><code>/ (Root)\n\u251c\u2500\u2500 frontend/                     # React advanced flag. Excludes HTMX.\n\u2502   \u251c\u2500\u2500 .env                      # Frontend environment configuration.\n\u2502   \u251c\u2500\u2500 node_modules/             # Node dependencies.\n\u2502   \u251c\u2500\u2500 public/\n\u2502   \u2502   \u251c\u2500\u2500 index.html\n\u2502   \u2502   \u2514\u2500\u2500 favicon.ico\n\u2502   \u251c\u2500\u2500 src/                      # React source files.\n\u2502   \u2502   \u251c\u2500\u2500 App.tsx               # Main React component.\n\u2502   \u2502   \u251c\u2500\u2500 assets/               # React assets directory.\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 logo.svg\n\u2502   \u2502   \u251c\u2500\u2500 components/           # React components directory.\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 Header.tsx\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 Footer.tsx\n\u2502   \u2502   \u251c\u2500\u2500 styles/               # CSS/SCSS styles directory.\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 global.css\n\u2502   \u2502   \u2514\u2500\u2500 index.tsx             # Main entry point for React\n\u2502   \u251c\u2500\u2500 eslint.config.js          # ESLint configuration file.\n\u2502   \u251c\u2500\u2500 index.html                # Base HTML template.\n\u2502   \u251c\u2500\u2500 package.json              # Node.js package configuration.\n\u2502   \u251c\u2500\u2500 package-lock.json         # Lock file for Node.js dependencies.\n\u2502   \u251c\u2500\u2500 README.md                 # README file for the React project.\n\u2502   \u251c\u2500\u2500 tsconfig.app.json         # TypeScript configuration for the app.\n\u2502   \u251c\u2500\u2500 tsconfig.json             # Root TypeScript configuration.\n\u2502   \u251c\u2500\u2500 tsconfig.node.json        # TypeScript configuration for Node.js.\n\u2502   \u2514\u2500\u2500 vite.config.ts            # Vite configuration file.\n</code></pre>"},{"location":"advanced-flag/react-vite/#usage","title":"Usage","text":"<ul> <li>Navigate to the <code>frontend</code> directory:    First, navigate to the <code>frontend</code> directory where the React project resides.</li> </ul> <pre><code>cd frontend\n</code></pre> <ul> <li>Install Dependencies:    Use npm to install all necessary dependencies.</li> </ul> <pre><code>npm install\n</code></pre> <ul> <li>Run the Development Server:    Start the Vite development server for local development. This will launch a live-reloading server on a default port.</li> </ul> <pre><code>npm run dev\n</code></pre> <p>You should now be able to access the React application by opening a browser and navigating to <code>http://localhost:5173</code>.</p> <p>You can extend the <code>vite.config.ts</code> to include additional configurations as needed, such as adding plugins for optimizing the build process, enabling TypeScript support, or configuring Tailwind CSS.</p>"},{"location":"advanced-flag/react-vite/#makefile","title":"Makefile","text":"<p>The make run target will start the Go server in the backend, install frontend dependencies, and run the Vite development server for the frontend.</p> <pre><code>run:\n    @go run cmd/api/main.go &amp;\n    @npm install --prefix ./frontend\n    @npm run dev --prefix ./frontend\n</code></pre> <p>After running this command, you can verify the connection between the frontend and backend by checking the console. You can also fetch data from the backend to test the integration.</p> <p></p>"},{"location":"advanced-flag/react-vite/#dockerfile","title":"Dockerfile","text":"<p>Combine React advanced flag with Docker flag to get Docker and docker-compose configuration and run them with:</p> <pre><code>make docker-run\n</code></pre>"},{"location":"advanced-flag/react-vite/#dockerfile_1","title":"Dockerfile","text":"<pre><code>FROM golang:1.24.4-alpine AS build\n\nWORKDIR /app\n\nCOPY go.mod go.sum ./\nRUN go mod download\n\nCOPY . .\n\nRUN go build -o main cmd/api/main.go\n\nFROM alpine:3.20.1 AS prod\nWORKDIR /app\nCOPY --from=build /app/main /app/main\nEXPOSE ${PORT}\nCMD [\"./main\"]\n\n\nFROM node:20 AS frontend_builder\nWORKDIR /frontend\n\nCOPY frontend/package*.json ./\nRUN npm install\nCOPY frontend/. .\nRUN npm run build\n\nFROM node:20-slim AS frontend\nRUN npm install -g serve\nCOPY --from=frontend_builder /frontend/dist /app/dist\nEXPOSE 5173\nCMD [\"serve\", \"-s\", \"/app/dist\", \"-l\", \"5173\"]\n</code></pre>"},{"location":"advanced-flag/react-vite/#docker-compose-without-db","title":"Docker compose without db","text":"<pre><code>services:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n      target: prod\n    restart: unless-stopped\n    ports:\n      - ${PORT}:${PORT}\n    environment:\n      APP_ENV: ${APP_ENV}\n      PORT: ${PORT}\n  frontend:\n    build:\n      context: .\n      dockerfile: Dockerfile\n      target: frontend\n    restart: unless-stopped\n    ports:\n      - 5173:5173\n    depends_on:\n      - app\n</code></pre>"},{"location":"advanced-flag/react-vite/#docker-compose-with-db","title":"Docker compose with db","text":"<pre><code>services:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n      target: prod\n    restart: unless-stopped\n    ports:\n      - ${PORT}:${PORT}\n    environment:\n      APP_ENV: ${APP_ENV}\n      PORT: ${PORT}\n      BLUEPRINT_DB_HOST: ${BLUEPRINT_DB_HOST}\n      BLUEPRINT_DB_PORT: ${BLUEPRINT_DB_PORT}\n      BLUEPRINT_DB_DATABASE: ${BLUEPRINT_DB_DATABASE}\n      BLUEPRINT_DB_USERNAME: ${BLUEPRINT_DB_USERNAME}\n      BLUEPRINT_DB_PASSWORD: ${BLUEPRINT_DB_PASSWORD}\n      BLUEPRINT_DB_SCHEMA: ${BLUEPRINT_DB_SCHEMA}\n    depends_on:\n      psql_bp:\n        condition: service_healthy\n    networks:\n      - blueprint\n  frontend:\n    build:\n      context: .\n      dockerfile: Dockerfile\n      target: frontend\n    restart: unless-stopped\n    depends_on:\n      - app\n    ports:\n      - 5173:5173\n    networks:\n      - blueprint\n  psql_bp:\n    image: postgres:latest\n    restart: unless-stopped\n    environment:\n      POSTGRES_DB: ${BLUEPRINT_DB_DATABASE}\n      POSTGRES_USER: ${BLUEPRINT_DB_USERNAME}\n      POSTGRES_PASSWORD: ${BLUEPRINT_DB_PASSWORD}\n    ports:\n      - \"${BLUEPRINT_DB_PORT}:5432\"\n    volumes:\n      - psql_volume_bp:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"sh -c 'pg_isready -U ${BLUEPRINT_DB_USERNAME} -d ${BLUEPRINT_DB_DATABASE}'\"]\n      interval: 5s\n      timeout: 5s\n      retries: 3\n      start_period: 15s\n    networks:\n      - blueprint\n\nvolumes:\n  psql_volume_bp:\nnetworks:\n  blueprint:\n</code></pre>"},{"location":"advanced-flag/react-vite/#environment-variables","title":"Environment Variables","text":"<p>The <code>VITE_PORT</code> in .env refers <code>PORT</code> from .env in project root ( for backend ). If value of <code>PORT</code> is changed than <code>VITE_PORT</code> must also be changed so that requests to backend work fine and have no conflicts.</p>"},{"location":"advanced-flag/react-vite/#notes","title":"Notes","text":"<ul> <li> <p>First time running the project creation with Tailwind can take longer (~10 mins) as npm needs to download and cache all packages</p> </li> <li> <p>Subsequent runs will be faster as they utilize npm's cache, which we enforce during project creation.</p> </li> <li> <p>If encountering issues with package installation, try these npm commands:</p> </li> </ul> <pre><code># Check cache status\nnpm cache verify\n\n# View cache contents\nnpm cache ls\n\n# Clean cache if needed\nnpm cache clean --force\n</code></pre>"},{"location":"advanced-flag/tailwind/","title":"Tailwind CSS","text":"<p>Tailwind is closely coupled with the advanced HTMX flag, and HTMX will be automatically used if you select Tailwind in your project.</p> <p>We do not introduce outside dependencies automatically, and you need compile output.css (file is empty by default) with the Tailwind CLI tool.</p> <p>The project tree would look like this:</p> <pre><code>/ (Root)\n\u251c\u2500\u2500 cmd/\n\u2502   \u251c\u2500\u2500 api/\n\u2502   \u2502   \u2514\u2500\u2500 main.go\n\u2502   \u2514\u2500\u2500 web/\n\u2502       \u251c\u2500\u2500 styles/\n\u2502       \u2502   \u2514\u2500\u2500 input.css\n\u2502       \u251c\u2500\u2500 assets/\n\u2502       \u2502   \u251c\u2500\u2500 css/\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 output.css\n\u2502       \u2502   \u2514\u2500\u2500 js/\n\u2502       \u2502       \u2514\u2500\u2500 htmx.min.js\n\u2502       \u251c\u2500\u2500 base.templ\n\u2502       \u251c\u2500\u2500 base_templ.go\n\u2502       \u251c\u2500\u2500 efs.go\n\u2502       \u251c\u2500\u2500 hello.go\n\u2502       \u251c\u2500\u2500 hello.templ\n\u2502       \u2514\u2500\u2500 hello_templ.go\n\u251c\u2500\u2500 internal/\n\u2502   \u2514\u2500\u2500 server/\n\u2502       \u251c\u2500\u2500 routes.go\n\u2502       \u251c\u2500\u2500 routes_test.go\n\u2502       \u2514\u2500\u2500 server.go\n\u251c\u2500\u2500 go.mod\n\u251c\u2500\u2500 go.sum\n\u251c\u2500\u2500 Makefile\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"advanced-flag/tailwind/#standalone-tailwind-cli","title":"Standalone Tailwind CLI","text":"<p>The idea is to avoid using Node.js and npm to build output.css.</p> <p>The Makefile will have entries for downloading and compiling CSS. It will automatically detect the OS and download the latest release from the official repository.</p>"},{"location":"advanced-flag/tailwind/#linux-makefile-example","title":"Linux Makefile Example","text":"<pre><code>all: build\ntempl-install:\n    @if ! command -v templ &gt; /dev/null; then \\\n        read -p \"Go's 'templ' is not installed on your machine. Do you want to install it? [Y/n] \" choice; \\\n        if [ \"$$choice\" != \"n\" ] &amp;&amp; [ \"$$choice\" != \"N\" ]; then \\\n            go install github.com/a-h/templ/cmd/templ@latest; \\\n            if [ ! -x \"$$(command -v templ)\" ]; then \\\n                echo \"templ installation failed. Exiting...\"; \\\n                exit 1; \\\n            fi; \\\n        else \\\n            echo \"You chose not to install templ. Exiting...\"; \\\n            exit 1; \\\n        fi; \\\n    fi\n\ntailwind-install:\n    @if [ ! -f tailwindcss ]; then curl -sL https://github.com/tailwindlabs/tailwindcss/releases/latest/download/tailwindcss-linux-x64 -o tailwindcss; fi\n    @chmod +x tailwindcss\n\nbuild: tailwind-install templ-install\n    @echo \"Building...\"\n    @templ generate\n    @./tailwindcss -i cmd/web/styles/input.css -o cmd/web/assets/css/output.css\n    @go build -o main cmd/api/main.go\n</code></pre>"},{"location":"advanced-flag/tailwind/#use-tailwind-css-in-your-project","title":"Use Tailwind CSS in your project","text":"<p>By default, simple CSS examples are included in the codebase. Update base.templ and hello.templ, then rerun templ generate to see the changes at the <code>localhost:PORT/web</code> endpoint.</p> <p></p>"},{"location":"advanced-flag/websocket/","title":"Websocket","text":"<p>A <code>/websocket</code> endpoint is added in <code>routes.go</code> to facilitate websocket connections. Upon accessing this endpoint, the server establishes a websocket connection and begins transmitting timestamp messages at 2-second intervals. WS is utilized across all Go-blueprint supported frameworks. This simple implementation showcases how flexible a project is.</p>"},{"location":"advanced-flag/websocket/#code-implementation","title":"Code Implementation","text":"<pre><code>func (s *Server) websocketHandler(c *gin.Context) {\n    w := c.Writer\n    r := c.Request\n    socket, err := websocket.Accept(w, r, nil)\n\n    if err != nil {\n        log.Printf(\"could not open websocket: %v\", err)\n        _, _ = w.Write([]byte(\"could not open websocket\"))\n        w.WriteHeader(http.StatusInternalServerError)\n        return\n    }\n\n    defer socket.Close(websocket.StatusGoingAway, \"server closing websocket\")\n\n    ctx := r.Context()\n    socketCtx := socket.CloseRead(ctx)\n\n    for {\n        payload := fmt.Sprintf(\"server timestamp: %d\", time.Now().UnixNano())\n        err := socket.Write(socketCtx, websocket.MessageText, []byte(payload))\n        if err != nil {\n            break\n        }\n        time.Sleep(time.Second * 2)\n    }\n}\n</code></pre>"},{"location":"blueprint-core/db-drivers/","title":"DB Drivers","text":"<p>To extend the project with database functionality, users can choose from a variety of Go database drivers. Each driver is tailored to work with specific database systems, providing flexibility based on project requirements:</p> <ol> <li>Mongo: Provides necessary tools for connecting and interacting with MongoDB databases.</li> <li>Mysql: Enables seamless integration with MySQL databases.</li> <li>Postgres: Facilitates connectivity to PostgreSQL databases.</li> <li>Redis: Provides tools for connecting and interacting with Redis.</li> <li>Sqlite: Suitable for projects requiring a lightweight, self-contained database.</li> <li>ScyllaDB: Facilitates connectivity to ScyllaDB databases.</li> </ol>"},{"location":"blueprint-core/db-drivers/#updated-project-structure","title":"Updated Project Structure","text":"<p>Integrating a database adds a new layer to the project structure, primarily in the <code>internal/database</code> directory:</p> <pre><code>/(Root)\n\u251c\u2500\u2500 /cmd\n\u2502   \u2514\u2500\u2500 /api\n\u2502       \u2514\u2500\u2500 main.go\n\u251c\u2500\u2500 /internal\n\u2502   \u251c\u2500\u2500 /database\n\u2502   \u2502   \u251c\u2500\u2500 database_test.go\n\u2502   \u2502   \u2514\u2500\u2500 database.go\n\u2502   \u2514\u2500\u2500 /server\n\u2502       \u251c\u2500\u2500 routes.go\n\u2502       \u251c\u2500\u2500 routes_test.go\n\u2502       \u2514\u2500\u2500 server.go\n\u251c\u2500\u2500 go.mod\n\u251c\u2500\u2500 go.sum\n\u251c\u2500\u2500 Makefile\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"blueprint-core/db-drivers/#database-driver-implementation","title":"Database Driver Implementation","text":"<p>Users can select the desired database driver based on their project's specific needs. The chosen driver is then imported into the project, and the <code>database.go</code> file is adjusted accordingly to establish a connection and manage interactions with the selected database.</p>"},{"location":"blueprint-core/db-drivers/#integration-tests-for-database-operations","title":"Integration Tests for Database Operations","text":"<p>For all the database drivers but <code>Sqlite</code>, integration tests are automatically generated to ensure that the database connection is working correctly. It uses Testcontainers for Go to spin up a containerized instance of the database server, run the tests, and then tear down the container.</p> <p>Testcontainers for Go is a Go package that makes it simple to create and clean up container-based dependencies for automated integration/smoke tests. The clean, easy-to-use API enables developers to programmatically define containers that should be run as part of a test and clean up those resources when the test is done.</p>"},{"location":"blueprint-core/db-drivers/#requirements","title":"Requirements","text":"<p>You need a container runtime installed on your machine. Testcontainers supports Docker and any other container runtime that implements the Docker APIs.</p> <p>To install Docker:</p> <pre><code>curl -sLO get.docker.com\n</code></pre>"},{"location":"blueprint-core/db-drivers/#running-the-tests","title":"Running the tests","text":"<p>Go to the <code>internal/database</code> directory and run the following command:</p> <pre><code>go test -v\n</code></pre> <p>Or, just run the following command from the root directory:</p> <pre><code>make itest\n</code></pre> <p>Testcontainers automatically pulls the required Docker images and start the containers. The tests run against the containers, and once the tests are done, the containers are stopped and removed. For further information, refer to the official documentation.</p>"},{"location":"blueprint-core/db-drivers/#docker-compose-for-quick-database-spinup","title":"Docker-Compose for Quick Database Spinup","text":"<p>To facilitate quick setup and testing, a <code>docker-compose.yml</code> file is provided. This file defines a service for the chosen database system with the necessary environment variables. Running <code>docker-compose up</code> will quickly spin up a containerized instance of the database, allowing users to test their application against a real database server.</p> <p>This Docker Compose approach simplifies the process of setting up a database for development or testing purposes, providing a convenient and reproducible environment for the project.</p>"},{"location":"blueprint-core/frameworks/","title":"Frameworks","text":"<p>Created projects can utilize several Go web frameworks to handle HTTP routing and server functionality. The chosen frameworks are:</p> <ol> <li>Chi: Lightweight and flexible router for building Go HTTP services.</li> <li>Echo: High-performance, extensible, minimalist Go web framework.</li> <li>Fiber: Express-inspired web framework designed to be fast, simple, and efficient.</li> <li>Gin: A web framework with a martini-like API, but with much better performance.</li> <li>Gorilla/mux: A powerful URL router and dispatcher for Golang.</li> <li>HttpRouter: A high-performance HTTP request router that scales well.</li> </ol>"},{"location":"blueprint-core/frameworks/#project-structure","title":"Project Structure","text":"<p>The project is structured with a simple layout, focusing on the cmd, internal, and tests directories:</p> <pre><code>/(Root)\n\u251c\u2500\u2500 /cmd\n\u2502   \u2514\u2500\u2500 /api\n\u2502       \u2514\u2500\u2500 main.go\n\u251c\u2500\u2500 /internal\n\u2502   \u2514\u2500\u2500 /server\n\u2502       \u251c\u2500\u2500 routes.go\n\u2502       \u251c\u2500\u2500 routes_test.go\n\u2502       \u2514\u2500\u2500 server.go\n\u251c\u2500\u2500 go.mod\n\u251c\u2500\u2500 go.sum\n\u251c\u2500\u2500 Makefile\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"creating-project/air/","title":"Air","text":""},{"location":"creating-project/air/#air-live-reloading-utility","title":"Air - Live Reloading Utility","text":"<p>Air is a live-reloading utility designed to enhance the development experience by automatically rebuilding and restarting your Go application whenever changes are detected in the source code.</p> <p>The Makefile provided in the project repository includes a command make watch, which triggers Air to monitor file changes and initiate rebuilds and restarts as necessary. Additionally, if Air is not installed on your machine, the Makefile provides an option to install it automatically.</p> <p>Air's <code>.air.toml</code> configuration file allows customization of various aspects of its behavior.</p>"},{"location":"creating-project/air/#live-preview","title":"Live Preview","text":"<pre><code>make watch\n\n  __    _   ___  \n / /\\  | | | |_) \n/_/--\\ |_| |_| \\_ v1.51.0, built with Go go1.22.0\n\nmkdir /home/ujstor/code/blueprint-version-test/ws-test4/tmp\nwatching .\nwatching cmd\nwatching cmd/api\nwatching cmd/web\nwatching cmd/web/assets\nwatching cmd/web/assets/js\nwatching internal\nwatching internal/database\nwatching internal/server\nwatching tests\n!exclude tmp\nbuilding...\nmake[1]: Entering directory '/home/ujstor/code/blueprint-version-test/ws-test4'\nBuilding...\nProcessing path: /home/ujstor/code/blueprint-version-test/ws-test4\nGenerated code for \"/home/ujstor/code/blueprint-version-test/ws-test4/cmd/web/base.templ\" in 914.556\u00b5s\nGenerated code for \"/home/ujstor/code/blueprint-version-test/ws-test4/cmd/web/hello.templ\" in 963.157\u00b5s\nGenerated code for 2 templates with 0 errors in 1.274392ms\nmake[1]: Leaving directory '/home/ujstor/code/blueprint-version-test/ws-test4'\nrunning...\ninternal/server/routes.go has changed\nbuilding...\nmake[1]: Entering directory '/home/ujstor/code/blueprint-version-test/ws-test4'\nBuilding...\nProcessing path: /home/ujstor/code/blueprint-version-test/ws-test4\nGenerated code for \"/home/ujstor/code/blueprint-version-test/ws-test4/cmd/web/base.templ\" in 907.426\u00b5s\nGenerated code for \"/home/ujstor/code/blueprint-version-test/ws-test4/cmd/web/hello.templ\" in 1.16142ms\nGenerated code for 2 templates with 0 errors in 1.527556ms\nmake[1]: Leaving directory '/home/ujstor/code/blueprint-version-test/ws-test4'\nrunning...\n</code></pre> <p>Integrating Air into your development workflow alongside the provided Makefile enables a smooth and efficient process for building, testing, and running your Go applications. With automatic live-reloading, you can focus more on coding and less on manual build and restart steps.</p>"},{"location":"creating-project/makefile/","title":"Makefile","text":""},{"location":"creating-project/makefile/#makefile-project-management","title":"Makefile Project Management","text":"<p>Makefile is designed for building, running, and testing a Go project. It includes support for advanced options like HTMX and Tailwind CSS, and handles OS-specific operations for Unix-based systems (Linux/macOS) and Windows.</p>"},{"location":"creating-project/makefile/#targets","title":"Targets","text":"<p><code>all</code></p> <p>The default target that builds and test the application by running the <code>build</code> and <code>test</code> target.</p> <p><code>templ-install</code></p> <p>This target installs the Go-based templating tool, <code>templ</code>, if it is not already installed. It supports:</p> <ul> <li>Unix-based systems: Prompts the user to install <code>templ</code> if it is missing.</li> <li>Windows: Uses PowerShell to check for and install <code>templ</code>.</li> </ul> <p><code>tailwind-install</code></p> <p>This target downloads and sets up <code>tailwindcss</code>, depending on the user's operating system:</p> <ul> <li>Linux: Downloads the Linux binary.</li> <li>macOS: Downloads the macOS binary.</li> <li>Windows: Uses PowerShell to download the Windows executable.</li> </ul> <p><code>build</code></p> <p>Builds the Go application and generates assets with <code>templ</code> and <code>tailwind</code>, if the corresponding advanced options are enabled:</p> <ul> <li>Uses <code>templ</code> to generate templates.</li> <li>Runs <code>tailwindcss</code> to compile CSS.</li> </ul> <p><code>run</code></p> <p>Runs the Go application by executing the <code>cmd/api/main.go</code> file and npm install with run dev if React flag is used.</p> <p><code>docker-run</code> and <code>docker-down</code></p> <p>These targets manage a database container:</p> <ul> <li>Unix-based systems: Tries Docker Compose V2 first, falls back to V1 if needed.</li> <li>Windows: Uses Docker Compose without version fallback.</li> </ul> <p><code>test</code></p> <p>Runs unit tests for the application using <code>go test</code>.</p> <p><code>itest</code></p> <p>Runs integration tests if a database, with the exception of SQLite, is used.</p> <p><code>clean</code></p> <p>Removes the compiled binary (<code>main</code> or <code>main.exe</code> depending on the OS).</p> <p><code>watch</code></p> <p>Enables live reload for the project using the <code>air</code> tool:</p> <ul> <li>Unix-based systems: Checks if <code>air</code> is installed and prompts for installation if missing.</li> <li>Windows: Uses PowerShell to manage <code>air</code> installation and execution.</li> </ul>"},{"location":"creating-project/project-init/","title":"Project init","text":""},{"location":"creating-project/project-init/#creating-a-project","title":"Creating a Project","text":"<p>After installing the Go-Blueprint CLI tool, you can create a new project with the default settings by running the following command:</p> <pre><code>go-blueprint create\n</code></pre> <p>This command will interactively guide you through the project setup process, allowing you to choose the project name, framework, and database driver.</p> <p></p>"},{"location":"creating-project/project-init/#using-flags-for-non-interactive-setup","title":"Using Flags for Non-Interactive Setup","text":"<p>For a non-interactive setup, you can use flags to provide the necessary information during project creation. Here's an example:</p> <pre><code>go-blueprint create --name my-project --framework gin --driver postgres --git commit\n</code></pre> <p>In this example:</p> <ul> <li><code>--name</code>: Specifies the name of the project (replace \"my-project\" with your desired project name).</li> <li><code>--framework</code>: Specifies the Go framework to be used (e.g., \"gin\").</li> <li><code>--driver</code>: Specifies the database driver to be integrated (e.g., \"postgres\").</li> <li><code>--git</code>: Specifies the git configuration option of the project (e.g., \"commit\").</li> </ul> <p>Customize the flags according to your project requirements.</p>"},{"location":"creating-project/project-init/#advanced-flag","title":"Advanced Flag","text":"<p>By including the <code>--advanced</code> flag, users can choose one or all of the advanced features, HTMX, GitHub Actions for CI/CD, Websocket, Docker and TailwindCSS support, during the project creation process. The flag enhances the simplicity of Blueprint while offering flexibility for users who require additional functionality.</p> <pre><code>go-blueprint create --advanced\n</code></pre> <p>To recreate the project using the same configuration semi-interactively, use the following command:</p> <pre><code>go-blueprint create --name my-project --framework chi --driver mysql --git commit --advanced\n</code></pre> <p>This approach opens interactive mode only for advanced features, which allows you to choose the one or combination of available features.</p> <p></p>"},{"location":"creating-project/project-init/#non-interactive-setup","title":"Non-Interactive Setup","text":"<p>Advanced features can be enabled using the <code>--feature</code> flag along with the <code>--advanced</code> flag:</p> <p>HTMX:</p> <pre><code>go-blueprint create --advanced --feature htmx\n</code></pre> <p>CI/CD workflow:</p> <pre><code>go-blueprint create --advanced --feature githubaction\n</code></pre> <p>Websocket:</p> <pre><code>go-blueprint create --advanced --feature websocket\n</code></pre> <p>TailwindCSS:</p> <pre><code>go-blueprint create --advanced --feature tailwind\n</code></pre> <p>Docker:</p> <pre><code>go-blueprint create --advanced --feature docker\n</code></pre> <p>Or all features at once:</p> <pre><code>go-blueprint create --name my-project --framework chi --driver mysql --git commit --advanced --feature htmx --feature githubaction --feature websocket --feature tailwind --feature docker\n</code></pre>"},{"location":"endpoints-test/mongo/","title":"MongoDB","text":"<p>To test the MongoDB Health Check endpoint, use the following curl command:</p> <pre><code>curl http://localhost:PORT/health\n</code></pre>"},{"location":"endpoints-test/mongo/#health-function","title":"Health Function","text":"<p>The <code>Health</code> function checks the health of the MongoDB by pinging it. It returns a simple map containing a health message.</p>"},{"location":"endpoints-test/mongo/#functionality","title":"Functionality","text":"<p>Ping MongoDB Server: The function pings the MongoDB thru server to check its availability.</p> <ul> <li>If the ping fails, it logs the error and terminates the program.</li> <li>If the ping succeeds, it returns a health message indicating that the server is healthy.</li> </ul>"},{"location":"endpoints-test/mongo/#sample-output","title":"Sample Output","text":"<p>The <code>Health</code> returns a JSON-like map structure with a single key indicating the health status:</p> <pre><code>{\n  \"message\": \"It's healthy\"\n}\n</code></pre>"},{"location":"endpoints-test/mongo/#code-implementation","title":"Code implementation","text":"<pre><code>func (s *service) Health() map[string]string {\n    ctx, cancel := context.WithTimeout(context.Background(), 1*time.Second)\n    defer cancel()\n\n    err := s.db.Ping(ctx, nil)\n    if err != nil {\n        log.Fatalf(\"db down: %v\", err) \n    }\n\n    return map[string]string{\n        \"message\": \"It's healthy\",\n    }\n}\n</code></pre>"},{"location":"endpoints-test/mongo/#note","title":"Note","text":"<p>MongoDB does not support advanced health check functions like SQL databases or Redis. The implementation is basic, providing only a simple ping response to indicate if the server is reachable and DB connection healthy.</p>"},{"location":"endpoints-test/redis/","title":"Redis","text":"<p>To test the Redis Health Check endpoint, use the following curl command:</p> <pre><code>curl http://localhost:PORT/health\n</code></pre>"},{"location":"endpoints-test/redis/#health-function","title":"Health Function","text":"<p>The <code>Health</code> function orchestrates the health assessment of the Redis server by invoking the <code>checkRedisHealth</code> function and returning the collected statistics.</p>"},{"location":"endpoints-test/redis/#functionality","title":"Functionality","text":"<p>Check Redis Health: The function pings the Redis server to check its availability and adds the response to the stats map.</p> <ul> <li>If the ping fails, it logs the error and terminates the program.</li> <li>If the ping succeeds, it proceeds to retrieve additional information.</li> </ul> <p>Retrieve Redis Information: The function retrieves information about the Redis server, including version, mode, connected clients, memory usage, uptime, etc.</p> <ul> <li>If an error occurs during info retrieval, it updates the health message accordingly.</li> </ul> <p>Evaluate Redis Statistics: The function evaluates the collected statistics to identify potential issues and updates the health message accordingly.</p> <ul> <li>It checks for high number of connected clients, stale connections, memory usage, recent restart, high idle connections, and high connection pool utilization.</li> </ul>"},{"location":"endpoints-test/redis/#sample-output","title":"Sample Output","text":"<p>The <code>Health</code> function returns a JSON-like map structure with various keys representing different health metrics and their corresponding values.</p> <pre><code>{\n  \"redis_active_connections\": \"0\",\n  \"redis_connected_clients\": \"1\",\n  \"redis_hits_connections\": \"1\",\n  \"redis_idle_connections\": \"1\",\n  \"redis_max_memory\": \"0\",\n  \"redis_message\": \"Redis has been recently restarted\",\n  \"redis_misses_connections\": \"1\",\n  \"redis_mode\": \"standalone\",\n  \"redis_ping_response\": \"PONG\",\n  \"redis_pool_size_percentage\": \"0.42%\",\n  \"redis_stale_connections\": \"0\",\n  \"redis_status\": \"up\",\n  \"redis_timeouts_connections\": \"0\",\n  \"redis_total_connections\": \"1\",\n  \"redis_uptime_in_seconds\": \"55\",\n  \"redis_used_memory\": \"980704\",\n  \"redis_used_memory_peak\": \"980704\",\n  \"redis_version\": \"7.2.4\"\n}\n</code></pre>"},{"location":"endpoints-test/redis/#serializationdeserialization","title":"Serialization/deserialization","text":"<p>The <code>Sample Output</code> is dynamic and unstructured since it depends on the raw map. To make it structurable, it must implement <code>JSON serialization/deserialization</code> or <code>Other serialization/deserialization</code> (e.g, <code>XML serialization/deserialization</code>) to bind it. For example:</p> <ul> <li><code>JSON serialization/deserialization</code></li> </ul> <pre><code>{\n  \"redis_health\": {\n    \"status\": \"up\",\n    \"message\": \"Redis connection pool utilization is high\",\n    \"stats\": {\n      \"version\": \"7.0.15\",\n      \"mode\": \"standalone\",\n      \"connected_clients\": \"10\",\n      \"memory\": {\n        \"used\": {\n          \"mb\": \"22.38\",\n          \"gb\": \"0.02\"\n        },\n        \"peak\": {\n          \"mb\": \"46.57\",\n          \"gb\": \"0.05\"\n        },\n        \"free\": {\n          \"mb\": \"1130.00\",\n          \"gb\": \"1.10\"\n        },\n        \"percentage\": \"1.98%\"\n      },\n      \"uptime_stats\": \"6 days, 3 hours, 37 minutes, 20 seconds\",\n      \"uptime\": [\n        {\n          \"day\": \"6\"\n        },\n        {\n          \"hour\": \"3\"\n        },\n        {\n          \"minute\": \"37\"\n        },\n        {\n          \"second\": \"20\"\n        }\n      ],\n      \"pooling\": {\n        \"figures\": {\n          \"hits\": \"10\",\n          \"misses\": \"2\",\n          \"timeouts\": \"0\",\n          \"total\": \"4\",\n          \"stale\": \"9\",\n          \"idle\": \"5\",\n          \"active\": \"0\",\n          \"percentage\": \"62.50%\"\n        },\n        \"observed_total\": \"26\"\n      }\n    }\n  }\n}\n</code></pre> <ul> <li><code>XML serialization/deserialization</code></li> </ul> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;redis_health&gt;\n  &lt;status&gt;up&lt;/status&gt;\n  &lt;message&gt;Redis connection pool utilization is high&lt;/message&gt;\n  &lt;stats&gt;\n    &lt;version&gt;7.0.15&lt;/version&gt;\n    &lt;mode&gt;standalone&lt;/mode&gt;\n    &lt;connected_clients&gt;10&lt;/connected_clients&gt;\n    &lt;memory&gt;\n      &lt;used&gt;\n        &lt;mb&gt;22.38&lt;/mb&gt;\n        &lt;gb&gt;0.02&lt;/gb&gt;\n      &lt;/used&gt;\n      &lt;peak&gt;\n        &lt;mb&gt;46.57&lt;/mb&gt;\n        &lt;gb&gt;0.05&lt;/gb&gt;\n      &lt;/peak&gt;\n      &lt;free&gt;\n        &lt;mb&gt;1130.00&lt;/mb&gt;\n        &lt;gb&gt;1.10&lt;/gb&gt;\n      &lt;/free&gt;\n      &lt;percentage&gt;1.98%&lt;/percentage&gt;\n    &lt;/memory&gt;\n    &lt;uptime_stats&gt;6 days, 3 hours, 37 minutes, 20 seconds&lt;/uptime_stats&gt;\n    &lt;uptime&gt;\n      &lt;day&gt;6&lt;/day&gt;\n      &lt;hour&gt;3&lt;/hour&gt;\n      &lt;minute&gt;37&lt;/minute&gt;\n      &lt;second&gt;20&lt;/second&gt;\n    &lt;/uptime&gt;\n    &lt;pooling&gt;\n      &lt;figures&gt;\n        &lt;hits&gt;10&lt;/hits&gt;\n        &lt;misses&gt;2&lt;/misses&gt;\n        &lt;timeouts&gt;0&lt;/timeouts&gt;\n        &lt;total&gt;4&lt;/total&gt;\n        &lt;stale&gt;9&lt;/stale&gt;\n        &lt;idle&gt;5&lt;/idle&gt;\n        &lt;active&gt;0&lt;/active&gt;\n        &lt;percentage&gt;62.50%&lt;/percentage&gt;\n      &lt;/figures&gt;\n      &lt;observed_total&gt;26&lt;/observed_total&gt;\n    &lt;/pooling&gt;\n  &lt;/stats&gt;\n&lt;/redis_health&gt;\n</code></pre>"},{"location":"endpoints-test/redis/#code-implementation","title":"Code Implementation","text":"<pre><code>func (s *service) Health() map[string]string {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second) // Default is now 5s\n    defer cancel()\n\n    stats := make(map[string]string)\n\n    stats = s.checkRedisHealth(ctx, stats)\n\n    return stats\n}\n\nfunc (s *service) checkRedisHealth(ctx context.Context, stats map[string]string) map[string]string {\n    pong, err := s.db.Ping(ctx).Result()\n    if err != nil {\n        log.Fatalf(\"db down: %v\", err) \n    }\n\n    stats[\"redis_status\"] = \"up\"\n    stats[\"redis_message\"] = \"It's healthy\"\n    stats[\"redis_ping_response\"] = pong\n\n    info, err := s.db.Info(ctx).Result()\n    if err != nil {\n        stats[\"redis_message\"] = fmt.Sprintf(\"Failed to retrieve Redis info: %v\", err)\n        return stats\n    }\n\n    redisInfo := parseRedisInfo(info)\n\n    poolStats := s.db.PoolStats()\n\n    stats[\"redis_version\"] = redisInfo[\"redis_version\"]\n    stats[\"redis_mode\"] = redisInfo[\"redis_mode\"]\n    stats[\"redis_connected_clients\"] = redisInfo[\"connected_clients\"]\n    stats[\"redis_used_memory\"] = redisInfo[\"used_memory\"]\n    stats[\"redis_used_memory_peak\"] = redisInfo[\"used_memory_peak\"]\n    stats[\"redis_uptime_in_seconds\"] = redisInfo[\"uptime_in_seconds\"]\n    stats[\"redis_hits_connections\"] = strconv.FormatUint(uint64(poolStats.Hits), 10)\n    stats[\"redis_misses_connections\"] = strconv.FormatUint(uint64(poolStats.Misses), 10)\n    stats[\"redis_timeouts_connections\"] = strconv.FormatUint(uint64(poolStats.Timeouts), 10)\n    stats[\"redis_total_connections\"] = strconv.FormatUint(uint64(poolStats.TotalConns), 10)\n    stats[\"redis_idle_connections\"] = strconv.FormatUint(uint64(poolStats.IdleConns), 10)\n    stats[\"redis_stale_connections\"] = strconv.FormatUint(uint64(poolStats.StaleConns), 10)\n    stats[\"redis_max_memory\"] = redisInfo[\"maxmemory\"]\n\n    activeConns := uint64(math.Max(float64(poolStats.TotalConns-poolStats.IdleConns), 0))\n    stats[\"redis_active_connections\"] = strconv.FormatUint(activeConns, 10)\n\n    poolSize := s.db.Options().PoolSize\n    connectedClients, _ := strconv.Atoi(redisInfo[\"connected_clients\"])\n    poolSizePercentage := float64(connectedClients) / float64(poolSize) * 100\n    stats[\"redis_pool_size_percentage\"] = fmt.Sprintf(\"%.2f%%\", poolSizePercentage)\n\n    return s.evaluateRedisStats(redisInfo, stats)\n}\n\nfunc (s *service) evaluateRedisStats(redisInfo, stats map[string]string) map[string]string {\n    poolSize := s.db.Options().PoolSize\n    poolStats := s.db.PoolStats()\n    connectedClients, _ := strconv.Atoi(redisInfo[\"connected_clients\"])\n    highConnectionThreshold := int(float64(poolSize) * 0.8)\n\n    if connectedClients &gt; highConnectionThreshold {\n        stats[\"redis_message\"] = \"Redis has a high number of connected clients\"\n    }\n\n    minStaleConnectionsThreshold := 500\n    if int(poolStats.StaleConns) &gt; minStaleConnectionsThreshold {\n        stats[\"redis_message\"] = fmt.Sprintf(\"Redis has %d stale connections.\", poolStats.StaleConns)\n    }\n\n    usedMemory, _ := strconv.ParseInt(redisInfo[\"used_memory\"], 10, 64)\n    maxMemory, _ := strconv.ParseInt(redisInfo[\"maxmemory\"], 10, 64)\n    if maxMemory &gt; 0 {\n        usedMemoryPercentage := float64(usedMemory) / float64(maxMemory) * 100\n        if usedMemoryPercentage &gt;= 90 {\n            stats[\"redis_message\"] = \"Redis is using a significant amount of memory\"\n        }\n    }\n\n    uptimeInSeconds, _ := strconv.ParseInt(redisInfo[\"uptime_in_seconds\"], 10, 64)\n    if uptimeInSeconds &lt; 3600 {\n        stats[\"redis_message\"] = \"Redis has been recently restarted\"\n    }\n\n    idleConns := int(poolStats.IdleConns)\n    highIdleConnectionThreshold := int(float64(poolSize) * 0.7)\n    if idleConns &gt; highIdleConnectionThreshold {\n        stats[\"redis_message\"] = \"Redis has a high number of idle connections\"\n    }\n\n    poolUtilization := float64(poolStats.TotalConns-poolStats.IdleConns) / float64(poolSize) * 100\n    highPoolUtilizationThreshold := 90.0\n    if poolUtilization &gt; highPoolUtilizationThreshold {\n        stats[\"redis_message\"] = \"Redis connection pool utilization is high\"\n    }\n\n    return stats\n}\n</code></pre>"},{"location":"endpoints-test/scylladb/","title":"ScyllaDB","text":"<p>To test the ScyllaDB Health Check endpoint, use the following curl command:</p> <pre><code>curl http://localhost:PORT/health\n</code></pre>"},{"location":"endpoints-test/scylladb/#health-function","title":"Health Function","text":"<p>The <code>Health</code> function checks the health of the ScyllaDB Cluster by pinging the Coordinator Node. It returns a simple map containing a health message.</p>"},{"location":"endpoints-test/scylladb/#functionality","title":"Functionality","text":"<p>Ping ScyllaDB Server: The function pings the ScyllaDB through server to check its availability.</p> <ul> <li>If the ping fails, it logs the error and terminates the program.</li> <li>If the ping succeeds, it returns a health message indicating that the server with some .</li> </ul>"},{"location":"endpoints-test/scylladb/#sample-output","title":"Sample Output","text":"<p>The <code>Health</code> returns a JSON-like map structure with a single key indicating the health status:</p> <pre><code>{\n  \"message\": \"It's healthy\",\n  \"status\": \"up\",\n  \"scylla_cluster_nodes_up\": \"3\",\n  \"scylla_cluster_nodes_down\": \"0\",\n  \"scylla_cluster_size\": \"1\",\n  \"scylla_current_datacenter\": \"datacenter1\",\n  \"scylla_current_time\": \"2024-11-04 22:59:21.69 +0000 UTC\",\n  \"scylla_health_check_duration\": \"16.896976ms\",\n  \"scylla_keyspaces\": \"6\"\n}\n</code></pre>"},{"location":"endpoints-test/scylladb/#scylladb-setup","title":"ScyllaDB Setup","text":"<p>Before starting the cluster, ensure the fs.aio-max-nr value is sufficient (e.g. <code>1048576</code> or <code>2097152</code> or more).</p> <p>If you prefer to configure it manually, run one of the following commands to check the current value:</p> <pre><code>sysctl --all | grep --word-regexp -- 'aio-max-nr'\n</code></pre> <pre><code>sysctl fs.aio-max-nr\n</code></pre> <pre><code>cat /proc/sys/fs/aio-max-nr\n</code></pre> <p>If the value is lower than required, you can use one of these commands:</p> <pre><code># Update config non-persistent\nsysctl --write fs.aio-max-nr=1048576\n</code></pre> <p>Here's some links for more relevant information and automation:</p> <ul> <li>Repository: gvieira/ws-scylla - Simple ScyllaDB Cluster management with   Makefiles</li> <li>ScyllaDB University: 101 Essentials Track -   Learn the base concepts of ScyllaDB</li> </ul>"},{"location":"endpoints-test/scylladb/#code-implementation","title":"Code implementation","text":"<p>Here you can check how the Health Check is done under the hood:</p> <pre><code>func (s *service) Health() map[string]string {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel()\n\n    stats := make(map[string]string)\n\n    // Check ScyllaDB health and populate the stats map\n    startedAt := time.Now()\n\n    // Execute a simple query to check connectivity\n    query := \"SELECT now() FROM system.local\"\n    iter := s.Session.Query(query).WithContext(ctx).Iter()\n    var currentTime time.Time\n    if !iter.Scan(&amp;currentTime) {\n        if err := iter.Close(); err != nil {\n            stats[\"status\"] = \"down\"\n            stats[\"message\"] = fmt.Sprintf(\"Failed to execute query: %v\", err)\n            return stats\n        }\n    }\n    if err := iter.Close(); err != nil {\n        stats[\"status\"] = \"down\"\n        stats[\"message\"] = fmt.Sprintf(\"Error during query execution: %v\", err)\n        return stats\n    }\n\n    // ScyllaDB is up\n    stats[\"status\"] = \"up\"\n    stats[\"message\"] = \"It's healthy\"\n    stats[\"scylla_current_time\"] = currentTime.String()\n\n    // Retrieve cluster information\n    // Get keyspace information\n    getKeyspacesQuery := \"SELECT keyspace_name FROM system_schema.keyspaces\"\n    keyspacesIterator := s.Session.Query(getKeyspacesQuery).Iter()\n\n    stats[\"scylla_keyspaces\"] = strconv.Itoa(keyspacesIterator.NumRows())\n    if err := keyspacesIterator.Close(); err != nil {\n        log.Fatalf(\"Failed to close keyspaces iterator: %v\", err)\n    }\n\n    // Get cluster information\n    var currentDatacenter string\n    var currentHostStatus bool\n\n    var clusterNodesUp uint\n    var clusterNodesDown uint\n    var clusterSize uint\n\n    clusterNodesIterator := s.Session.Query(\"SELECT dc, up FROM system.cluster_status\").Iter()\n    for clusterNodesIterator.Scan(&amp;currentDatacenter, &amp;currentHostStatus) {\n        clusterSize++\n        if currentHostStatus {\n            clusterNodesUp++\n        } else {\n            clusterNodesDown++\n        }\n    }\n\n    if err := clusterNodesIterator.Close(); err != nil {\n        log.Fatalf(\"Failed to close cluster nodes iterator: %v\", err)\n    }\n\n    stats[\"scylla_cluster_size\"] = strconv.Itoa(int(clusterSize))\n    stats[\"scylla_cluster_nodes_up\"] = strconv.Itoa(int(clusterNodesUp))\n    stats[\"scylla_cluster_nodes_down\"] = strconv.Itoa(int(clusterNodesDown))\n    stats[\"scylla_current_datacenter\"] = currentDatacenter\n\n    // Calculate the time taken to perform the health check\n    stats[\"scylla_health_check_duration\"] = time.Since(startedAt).String()\n    return stats\n}\n\n</code></pre>"},{"location":"endpoints-test/scylladb/#note","title":"Note","text":"<p>Scylladb does not support advanced health check functions like SQL databases or Redis. The current implementation is based on queries at <code>system</code> related keyspaces.</p>"},{"location":"endpoints-test/server/","title":"Server","text":""},{"location":"endpoints-test/server/#testing-endpoints-with-curl-and-websocat","title":"Testing Endpoints with CURL and WebSocat","text":"<p>Testing endpoints is an essential part of ensuring the correctness and functionality of your app. Depending on what options are used for go-blueprint project creation, you have various endpoints for testing your init application status.</p> <p>Before proceeding, ensure you have the following tools installed:</p> <ul> <li>CURL: A command-line tool for transferring data with URLs.</li> <li>WebSocat: A command-line WebSocket client.</li> </ul> <p>You can utilize alternative tools that support the WebSocket protocol to establish connections with the server. WebSocat is an open-source CLI tool, while POSTMAN serves as a GUI tool specifically designed for testing APIs and WebSocket functionality.</p>"},{"location":"endpoints-test/server/#hello-world-endpoint","title":"Hello World Endpoint","text":"<p>To test the Hello World endpoint, execute the following curl command:</p> <pre><code>curl http://localhost:PORT\n</code></pre> <p>Sample Output:</p> <pre><code>{\"message\": \"Hello World\"}\n</code></pre> <p>If the server is running and it is healthy, you should see the message 'Hello World' in the response. Also, depending on the framework you are using, there will be logs in the terminal:</p> <pre><code>make run\n[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.\n\n[GIN-debug] [WARNING] Running in \"debug\" mode. Switch to \"release\" mode in production.\n - using env:   export GIN_MODE=release\n - using code:  gin.SetMode(gin.ReleaseMode)\n\n[GIN-debug] GET    /                         --&gt; websocket-test/internal/server.(*Server).HelloWorldHandler-fm (3 handlers)\n[GIN-debug] GET    /health                   --&gt; websocket-test/internal/server.(*Server).healthHandler-fm (3 handlers)\n[GIN-debug] GET    /websocket                --&gt; websocket-test/internal/server.(*Server).websocketHandler-fm (3 handlers)\n[GIN] 2024/05/28 - 17:44:31 | 200 |       27.93\u00b5s |       127.0.0.1 | GET      \"/\"\n</code></pre>"},{"location":"endpoints-test/sql/","title":"SQL DBs","text":"<p>To test the SQL DB Health Check endpoint, use the following curl command:</p> <pre><code>curl http://localhost:PORT/health\n</code></pre>"},{"location":"endpoints-test/sql/#health-function","title":"Health Function","text":"<p>The <code>Health</code> function checks the health of the database connection by pinging the database and retrieving various statistics. It returns a map with keys indicating different health metrics.</p>"},{"location":"endpoints-test/sql/#functionality","title":"Functionality","text":"<p>Ping the Database: The function pings the database to ensure it is reachable.</p> <ul> <li>If the database is down, it logs the error, sets the status to \"down,\" and terminates the program.</li> <li>If the database is up, it proceeds to gather additional statistics.</li> </ul> <p>Collect Database Statistics: The function retrieves the following statistics from the database connection:</p> <ul> <li><code>open_connections</code>: Number of open connections to the database.</li> <li><code>in_use</code>: Number of connections currently in use.</li> <li><code>idle</code>: Number of idle connections.</li> <li><code>wait_count</code>: Number of times a connection has to wait.</li> <li><code>wait_duration</code>: Total time connections have spent waiting.</li> <li><code>max_idle_closed</code>: Number of connections closed due to exceeding idle time.</li> <li><code>max_lifetime_closed</code>: Number of connections closed due to exceeding their lifetime.</li> </ul> <p>Evaluate Statistics: Evaluates the collected statistics to provide a health message. Based on predefined thresholds, it updates the health message to indicate potential issues, such as heavy load or high wait events.</p>"},{"location":"endpoints-test/sql/#sample-output","title":"Sample Output","text":"<p>The <code>Health</code> function returns a JSON-like map structure with the following keys and example values:</p> <pre><code>{\n  \"idle\": \"1\",\n  \"in_use\": \"0\",\n  \"max_idle_closed\": \"0\",\n  \"max_lifetime_closed\": \"0\",\n  \"message\": \"It's healthy\",\n  \"open_connections\": \"1\",\n  \"status\": \"up\",\n  \"wait_count\": \"0\",\n  \"wait_duration\": \"0s\"\n}\n</code></pre>"},{"location":"endpoints-test/sql/#code-implementation","title":"Code Implementation","text":"<pre><code>func (s *service) Health() map[string]string {\n    ctx, cancel := context.WithTimeout(context.Background(), 1*time.Second)\n    defer cancel()\n\n    stats := make(map[string]string)\n\n    err := s.db.PingContext(ctx)\n    if err != nil {\n        stats[\"status\"] = \"down\"\n        stats[\"error\"] = fmt.Sprintf(\"db down: %v\", err)\n        log.Fatalf(\"db down: %v\", err)  \n        return stats\n    }\n\n    stats[\"status\"] = \"up\"\n    stats[\"message\"] = \"It's healthy\"\n\n    dbStats := s.db.Stats()\n    stats[\"open_connections\"] = strconv.Itoa(dbStats.OpenConnections)\n    stats[\"in_use\"] = strconv.Itoa(dbStats.InUse)\n    stats[\"idle\"] = strconv.Itoa(dbStats.Idle)\n    stats[\"wait_count\"] = strconv.FormatInt(dbStats.WaitCount, 10)\n    stats[\"wait_duration\"] = dbStats.WaitDuration.String()\n    stats[\"max_idle_closed\"] = strconv.FormatInt(dbStats.MaxIdleClosed, 10)\n    stats[\"max_lifetime_closed\"] = strconv.FormatInt(dbStats.MaxLifetimeClosed, 10)\n\n    if dbStats.OpenConnections &gt; 40 { \n        stats[\"message\"] = \"The database is experiencing heavy load.\"\n    }\n\n    if dbStats.WaitCount &gt; 1000 {\n        stats[\"message\"] = \"The database has a high number of wait events, indicating potential bottlenecks.\"\n    }\n\n    if dbStats.MaxIdleClosed &gt; int64(dbStats.OpenConnections)/2 {\n        stats[\"message\"] = \"Many idle connections are being closed, consider revising the connection pool settings.\"\n    }\n\n    if dbStats.MaxLifetimeClosed &gt; int64(dbStats.OpenConnections)/2 {\n        stats[\"message\"] = \"Many connections are being closed due to max lifetime, consider increasing max lifetime or revising the connection usage pattern.\"\n    }\n\n    return stats\n}\n</code></pre>"},{"location":"endpoints-test/web/","title":"Web Endpoint","text":"<p>To test the /web endpoint when HTMX and Temp are used, you can simply open it in a web browser. This endpoint serves an HTML page with a form.</p> <p>Navigate to <code>http://localhost:PORT/web</code></p> <p>This page contains a form with a single input field and a submit button. Upon submitting the form, \"Hello, [input]\" will be displayed.</p>"},{"location":"endpoints-test/web/#sample-output","title":"Sample output","text":""},{"location":"endpoints-test/web/#terminal-log","title":"Terminal log","text":"<pre><code>make run\n2024/05/28 20:42:06 \"POST http://localhost:8070/hello HTTP/1.1\" from 127.0.0.1:45494 - 200 24B in 53.23\u00b5s\n</code></pre>"},{"location":"endpoints-test/websocket/","title":"Websocket","text":""},{"location":"endpoints-test/websocket/#testing-with-websocat","title":"Testing with WebSocat","text":"<p>WebSocat is a versatile tool for working with websockets from the command line. Below are some examples of using WebSocat to test the websocket endpoint:</p> <pre><code># Start server\nmake run\n</code></pre> <pre><code># Connect to the websocket endpoint\n$ websocat ws://localhost:PORT/websocket\n</code></pre> <p>Replace <code>PORT</code> with the port number on which your server is running.</p>"},{"location":"endpoints-test/websocket/#sample-output","title":"Sample Output","text":"<p>Upon successful connection, the client should start receiving timestamp messages from the server every 2 seconds.</p> <pre><code>server timestamp: 1709046650354893857\nserver timestamp: 1709046652355956336\nserver timestamp: 1709046654357101642\nserver timestamp: 1709046656357202535\nserver timestamp: 1709046658358258120\nserver timestamp: 1709046660359338389\nserver timestamp: 1709046662360422533\nserver timestamp: 1709046664361194735\nserver timestamp: 1709046666362308678\nserver timestamp: 1709046668363390475\nserver timestamp: 1709046670364477838\nserver timestamp: 1709046672365193667\nserver timestamp: 1709046674366265199\nserver timestamp: 1709046676366564490\nserver timestamp: 1709046678367646090\nserver timestamp: 1709046680367851980\nserver timestamp: 1709046682368920527\n</code></pre>"}]}